!function(){function e(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},n=r.parcelRequired7c6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in a){var r=a[e];delete a[e];var n={id:e,exports:{}};return t[e]=n,r.call(n.exports,n,n.exports),n.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,r){a[e]=r},r.parcelRequired7c6=n);var o=n("bpxeT"),i=n("2TvXO"),l=n("d3Gjh"),d=n("1R002");n("7mS1x"),n("6oxRu");var c=n("6JpON"),s={closeModalOrderBtn:document.querySelector("[data-modal-order-close]"),modalOrder:document.querySelector("[data-modal-order-backdrop]"),modalOrderForm:document.querySelector(".modal-order-form"),modalOrderSubmitBtn:document.querySelector(".modal-order-form__button")},u="order-form-state";function m(){s.modalOrder.classList.toggle("is-hidden"),s.modalOrder.classList.contains("is-hidden")&&s.modalOrderForm.reset()}s.closeModalOrderBtn.addEventListener("click",m),s.modalOrderForm.addEventListener("input",(function(e){var r=e.currentTarget.elements,t=r.name,a=r.phone,n=r.email,o=r.comment,i={name:t.value.trim(),phone:a.value.trim(),email:n.value.trim(),comment:o.value.trim()};localStorage.setItem(u,JSON.stringify(i)),""!==t.value.trim()&&""!==a.value.trim()&&""!==n.value.trim()&&(s.modalOrderSubmitBtn.disabled=!1)})),s.modalOrderForm.addEventListener("submit",(function(r){r.preventDefault();var t=r.currentTarget.elements,a=t.name,n=t.phone,o=t.email,i=t.comment,l=a.value.trim(),d=n.value.trim(),s=o.value.trim(),u=i.value.trim();if(!/^[a-zA-Zа-яА-Я ]+$/.test(l))return void e(c).Report.failure("Error","Please enter a valid name.","Ok");if(!/^\+\d{12}$/.test(d))return void e(c).Report.failure("Error","Please enter a valid phone number in the format +380000000000.","Ok");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s))return void e(c).Report.failure("Error","Please enter a valid email address.","Ok");if(u.length>200)return void e(c).Report.failure("Error","Please limit the comment to ".concat(200," characters."),"Ok");var p={name:l,phone:d,email:s,comment:u};e(c).Loading.standard("Sending your order...");var f={method:"POST",body:JSON.stringify(p),headers:{"Content-Type":"application/json"}};fetch("https://tasty-treats-backend.p.goit.global/api/orders/add",f).then((function(e){if(201===e.status)return e.json();throw e.status>=400&&e.status<500?new Error("Bad Request"):new Error("Server Error")})).then((function(r){console.log("Data received from server:",r),e(c).Report.success("Your order has completed successfully!","","Ok",{position:"center-top",titleMaxLength:"100"}),m()})).catch((function(r){console.error("Error:",r),e(c).Report.failure("Error","An error occurred while submitting the order. Please try again later.","Ok")})).finally((function(){e(c).Loading.remove()}))})),setTimeout((function(){function e(){s.modalOrder.classList.toggle("is-hidden"),s.modalOrder.classList.contains("is-hidden")&&s.modalOrderForm.reset()}document.querySelectorAll("button[data-modal-order-cart]").forEach((function(r){r.addEventListener("click",e)}))}),2e3),function(){var e=JSON.parse(localStorage.getItem(u))||{},r=e.name,t=e.phone,a=e.email,n=e.comment;e&&(s.modalOrderForm.elements.name.value=r||"",s.modalOrderForm.elements.phone.value=t||"",s.modalOrderForm.elements.email.value=a||"",s.modalOrderForm.elements.comment.value=n||"");""!==r&&""!==t&&""!==a||(s.modalOrderSubmitBtn.disabled=!0)}();var p=new(0,l.default),f=document.querySelector(".cart-recipe-list");function v(){return(v=e(o)(e(i).mark((function r(){var t;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.getRecipe();case 3:return t=e.sent,e.abrupt("return",h(t));case 7:e.prev=7,e.t0=e.catch(0),(0,d.notifyError)();case 10:case"end":return e.stop()}}),r,null,[[0,7]])})))).apply(this,arguments)}function h(e){var r=e.results.map((function(e){return t=(r=e).thumb,a=r.area,n=r.rating,o=r.description,i=r.title,l=r.category,'<li class="cart-recipe-item">\n        <img class="cart-recipe-img" src="'.concat(t,'" alt = "').concat(l,'"></img>\n        <div class = "cart-text-wrap">\n        <h3 class="cart-recipe-title">').concat(i,'</h3>\n        <p class="cart-recipe-area"><b>Area:</b> ').concat(a,'</p>\n        <p class="cart-recipe-descr"><b>Description:</b> ').concat(o,'</p>\n        <p class="cart-recipe-rating"><b>Rating:</b> ').concat(n,'</p>\n        </div>\n        <button id="cart-order" type="button" class="hero__button button cart-recipe-btn" data-modal-order-cart>\n        Order now\n        </button>\n      </li>');var r,t,a,n,o,i,l})).join("");f.innerHTML=r}p.limit=9,function(){v.apply(this,arguments)}()}();
//# sourceMappingURL=cart.1d9115ea.js.map
