{"mappings":"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","sources":["src/js/cart/cart-main.js","src/js/cart/modal-order.js"],"sourcesContent":["import RecipeApiService from '../service/service-api';\nimport { notifyError } from '../notifications';\nimport '../../js/theme-switch';\nimport './modal-order';\nconst apiRecipe = new RecipeApiService();\n\nconst cartWrapper = document.querySelector('.cart-recipe-list');\n\napiRecipe.limit = 9;\n\n// Rendering cards\nasync function fillCartWrap() {\n  try {\n    const recipe = await apiRecipe.getRecipe();\n\n    return fillCart(recipe);\n  } catch (error) {\n    notifyError();\n  }\n}\n\nfillCartWrap();\n\n//Make markUp in cart\nfunction fillCart(resp) {\n  const takeValues = ({\n    thumb,\n    area,\n    rating,\n    description,\n    title,\n    category,\n  }) => {\n    return `<li class=\"cart-recipe-item\">\n        <img class=\"cart-recipe-img\" src=\"${thumb}\" alt = \"${category}\"></img>\n        <div class = \"cart-text-wrap\">\n        <h3 class=\"cart-recipe-title\">${title}</h3>\n        <p class=\"cart-recipe-area\"><b>Area:</b> ${area}</p>\n        <p class=\"cart-recipe-descr\"><b>Description:</b> ${description}</p>\n        <p class=\"cart-recipe-rating\"><b>Rating:</b> ${rating}</p>\n        </div>\n        <button id=\"cart-order\" type=\"button\" class=\"hero__button button cart-recipe-btn\" data-modal-order-cart>\n        Order now\n        </button>\n      </li>`;\n  };\n  const { results } = resp;\n  const markUpCart = results.map(obj => takeValues(obj)).join('');\n  cartWrapper.innerHTML = markUpCart;\n}\n","import Notiflix from 'notiflix';\n\nconst refs = {\n  //   openModalOrderBtn: document.querySelector('[data-modal-order-cart]'),\n  closeModalOrderBtn: document.querySelector('[data-modal-order-close]'),\n  modalOrder: document.querySelector('[data-modal-order-backdrop]'),\n  modalOrderForm: document.querySelector('.modal-order-form'),\n  modalOrderSubmitBtn: document.querySelector('.modal-order-form__button'),\n};\n\nconst ORDER_FORM_KEY = 'order-form-state';\n\n// refs.openModalOrderBtn.addEventListener('click', onToggleModalOrder);\nrefs.closeModalOrderBtn.addEventListener('click', onToggleModalOrder);\nrefs.modalOrderForm.addEventListener('input', onTextareaInput);\nrefs.modalOrderForm.addEventListener('submit', onFormSubmit);\n\nsetTimeout(() => {\n  const modalOrder = document.querySelectorAll('button[data-modal-order-cart]');\n  modalOrder.forEach(button => {\n    button.addEventListener('click', onToggleModalOrder);\n  });\n\n  function onToggleModalOrder() {\n    refs.modalOrder.classList.toggle('is-hidden');\n\n    // Clear the form inputs when the form is closed\n    if (refs.modalOrder.classList.contains('is-hidden')) {\n      refs.modalOrderForm.reset();\n    }\n  }\n}, 2000);\n\n// Open and close modal-order modal window\nfunction onToggleModalOrder() {\n  refs.modalOrder.classList.toggle('is-hidden');\n\n  // Clear the form inputs when the form is closed\n  if (refs.modalOrder.classList.contains('is-hidden')) {\n    refs.modalOrderForm.reset();\n  }\n}\n\nonClickPageReload();\n\n// Track the input event on the form and keep input data in localStorage\nfunction onTextareaInput(evt) {\n  const { name, phone, email, comment } = evt.currentTarget.elements;\n  const orderFormState = {\n    name: name.value.trim(),\n    phone: phone.value.trim(),\n    email: email.value.trim(),\n    comment: comment.value.trim(),\n  };\n\n  localStorage.setItem(ORDER_FORM_KEY, JSON.stringify(orderFormState));\n\n  if (\n    name.value.trim() !== '' &&\n    phone.value.trim() !== '' &&\n    email.value.trim() !== ''\n  )\n    refs.modalOrderSubmitBtn.disabled = false;\n}\n\n// Check localStorage after page reload and get last saved data (or empty fields otherwise)\nfunction onClickPageReload() {\n  const storageData = JSON.parse(localStorage.getItem(ORDER_FORM_KEY)) || {};\n  const { name, phone, email, comment } = storageData;\n  if (storageData) {\n    refs.modalOrderForm.elements.name.value = name || '';\n    refs.modalOrderForm.elements.phone.value = phone || '';\n    refs.modalOrderForm.elements.email.value = email || '';\n    refs.modalOrderForm.elements.comment.value = comment || '';\n  }\n  if (name === '' || phone === '' || email === '') {\n    refs.modalOrderSubmitBtn.disabled = true;\n  }\n}\n\n// Clean localStorage and form inputs after form submit\nfunction onFormSubmit(evt) {\n  evt.preventDefault();\n\n  const { name, phone, email, comment } = evt.currentTarget.elements;\n\n  const nameValue = name.value.trim();\n  const phoneValue = phone.value.trim();\n  const emailValue = email.value.trim();\n  const commentValue = comment.value.trim();\n\n  // Validate name: Allow only letters and spaces\n  const namePattern = /^[a-zA-Zа-яА-Я ]+$/;\n  if (!namePattern.test(nameValue)) {\n    // Invalid name format\n    Notiflix.Report.failure('Error', 'Please enter a valid name.', 'Ok');\n    return;\n  }\n\n  // Validate phone number: Use specific pattern for +380000000000 format\n  const phonePattern = /^\\+\\d{12}$/;\n  if (!phonePattern.test(phoneValue)) {\n    // Invalid phone number format\n    Notiflix.Report.failure(\n      'Error',\n      'Please enter a valid phone number in the format +380000000000.',\n      'Ok'\n    );\n    return;\n  }\n\n  // Validate email: Use regular expression for email format\n  const emailPattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  if (!emailPattern.test(emailValue)) {\n    // Invalid email format\n    Notiflix.Report.failure(\n      'Error',\n      'Please enter a valid email address.',\n      'Ok'\n    );\n    return;\n  }\n\n  // Validate comment: Limit maximum characters to 200\n  const maxCommentLength = 200;\n  if (commentValue.length > maxCommentLength) {\n    Notiflix.Report.failure(\n      'Error',\n      `Please limit the comment to ${maxCommentLength} characters.`,\n      'Ok'\n    );\n    return;\n  }\n\n  const postToAdd = {\n    name: nameValue,\n    phone: phoneValue,\n    email: emailValue,\n    comment: commentValue,\n  };\n\n  // Log the data being sent to the server\n  // console.log('Data sent to server:', postToAdd);\n\n  // Show loader before sending the request\n  Notiflix.Loading.standard('Sending your order...');\n\n  const options = {\n    method: 'POST',\n    body: JSON.stringify(postToAdd),\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  };\n\n  fetch('https://tasty-treats-backend.p.goit.global/api/orders/add', options)\n    .then(response => {\n      if (response.status === 201) {\n        // Successful response, order created\n        // You may also want to parse the response JSON if the backend sends additional data\n        return response.json();\n      } else if (response.status >= 400 && response.status < 500) {\n        // Client-side error (4xx) - Bad Request or Validation Error\n        throw new Error('Bad Request');\n      } else {\n        // Other server-side error (5xx) - Internal Server Error\n        throw new Error('Server Error');\n      }\n    })\n    .then(data => {\n      console.log('Data received from server:', data);\n      // Show success message using Notiflix\n      Notiflix.Report.success(\n        'Your order has completed successfully!',\n        '',\n        'Ok',\n        {\n          position: 'center-top',\n          titleMaxLength: '100',\n        }\n      );\n      onToggleModalOrder();\n    })\n    .catch(error => {\n      console.error('Error:', error);\n      // Show error message using Notiflix\n      Notiflix.Report.failure(\n        'Error',\n        'An error occurred while submitting the order. Please try again later.',\n        'Ok'\n      );\n    })\n    .finally(() => {\n      // Hide the loader after request completion\n      Notiflix.Loading.remove();\n    });\n}\n"],"names":["$bpxeT","parcelRequire","$6JpON","$df0e242172de0d7c$var$refs","closeModalOrderBtn","document","querySelector","modalOrder","modalOrderForm","modalOrderSubmitBtn","$df0e242172de0d7c$var$ORDER_FORM_KEY","$df0e242172de0d7c$var$onToggleModalOrder","classList","toggle","contains","reset","addEventListener","evt","_elements","currentTarget","elements","name","phone","email","comment","orderFormState","value","trim","localStorage","setItem","JSON","stringify","disabled","preventDefault","nameValue","phoneValue","emailValue","commentValue","test","$parcel$interopDefault","Report","failure","length","concat","postToAdd","Loading","standard","options","method","body","headers","fetch","then","response","status","json","Error","data","console","log","success","position","titleMaxLength","catch","error","finally","remove","setTimeout","onToggleModalOrder1","querySelectorAll","forEach","button","storageData","parse","getItem","$df0e242172de0d7c$var$onClickPageReload","$2f0d38bb6c468f16$var$apiRecipe","$d3Gjh","default","$2f0d38bb6c468f16$var$cartWrapper","$2f0d38bb6c468f16$var$_fillCartWrap","$2TvXO","mark","_callee","recipe","getRecipe","_ctx","sent","$2f0d38bb6c468f16$var$fillCart","$aYvV9","notifyError","apply","this","arguments","resp","markUpCart","results","map","obj","thumb","param","area","rating","description","title","category","join","innerHTML","limit","$2f0d38bb6c468f16$var$fillCartWrap"],"version":3,"file":"cart.3bdfd280.js.map"}