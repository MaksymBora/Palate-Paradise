function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in i){var t=i[e];delete i[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){i[e]=t},t.parcelRequired7c6=a),a("8FnLx");var o=a("tgDFu");var s={recipesListContainer:document.querySelector(".fav-list"),categoriesContainer:document.querySelector(".fav-categories"),noFavoritesMessage:document.querySelector(".fav-empty"),paginationElement:document.getElementById("pagination"),allButton:document.querySelector(".common-btn"),categoriesList:document.querySelector(".fav-categories"),renderedRecipesBox:document.getElementById("fav-rendered-card"),heroImage:document.querySelector(".fav-hero")};function r(e){const t=localStorage.getItem(e);return JSON.parse(t)}function c(){return window.innerWidth<768?9:12}function l(e,t){const n={};for(let i=0;i<e.length;i+=t){n[Math.floor(i/t)+1]=e.slice(i,i+t)}return n}var d=a("fT9c6"),u=a("fb9GJ");var g=function(t,n,i,a){const o={totalItems:n*i,itemsPerPage:n,visiblePages:window.innerWidth<768?2:3,page:t,centerAlign:!1,omitMiddlePages:!1,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",template:{page:'<a href="#" class="tui-page-btn pag-page">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}} move-button"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}} prev-button"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip more-button"><span class="tui-ico-ellip">...</span></a>'}};new(e(u))("pagination",o).on("afterMove",(({page:e})=>{a(e)}))},f=(d=a("fT9c6"),a("gjiCh"));function p(e=1){(0,f.showLoader)();const t=r("favorites-data");if(s.allButton.style.display=t&&t.length?"block":"none",!t||0===t.length)return s.noFavoritesMessage.classList.remove("visually-hidden"),s.allButton.classList.add("visually-hidden"),void(window.innerWidth<768&&s.heroImage.classList.add("visually-hidden"));const n=c(),i=l(t,n),a=Object.keys(i).length;s.paginationElement.style.display=a>1?"block":"none",g(e,n,a,p);const o=i[e].map((({title:e,description:t,preview:n,rating:i,id:a,category:o})=>(0,d.renderingFavRec)(e,t,n,i,a,o))).join("");s.recipesListContainer.innerHTML=o,s.noFavoritesMessage.classList.add("visually-hidden"),(0,f.hideLoader)()}f=a("gjiCh");let v="";f=a("gjiCh");function m(e){return`<button class="fav-button">${e}</button>`}function y(e){(0,f.showLoader)();const t=e.closest("div.recipe-item").dataset.category,n=r("favorites-data"),i=n.find((e=>e.category===t)),a=[...refs.categoriesContainer.children].find((e=>e.textContent===t));!i&&a?a.remove():i&&!a&&refs.categoriesContainer.insertAdjacentHTML("beforeend",m(t)),refs.allButton.style.display=n&&n.length?"block":"none",(0,f.hideLoader)()}f=a("gjiCh");const h=new(0,o.default);function L(){(0,f.showLoader)();const e=function(){const e=localStorage.getItem("favorites-data"),t=JSON.parse(e);if(!t||0===t.length)return"";return t.flatMap((e=>e.category)).filter(((e,t,n)=>n.indexOf(e)===t)).reduce(((e,t)=>e+m(t)),"")}(),t=r("favorites-data");s.recipesListContainer.innerHTML="",s.categoriesContainer.innerHTML=t&&t.length?`<button class="fav-button common-btn is-active" name="main-cat-btn">All categories</button>${e}`:"",p(),(0,f.hideLoader)()}window.addEventListener("load",(function(){const e=document.querySelectorAll(".menu-nav-links");e[0].classList.contains("header-accent")&&(e[0].classList.remove("header-accent"),e.length>1&&e[1].classList.add("header-accent"))})),h.getRecipe().then((e=>{const t=e.results,n=[];for(let e=0;e<6;e++){const{_id:i,title:a,category:o,rating:s,preview:r,description:c}=t[e];for(let e=0;e<5;e++)n.push({id:i,title:a,category:o,rating:s,preview:r,description:c})}localStorage.setItem("favorites-data",JSON.stringify(n))})),s.renderedRecipesBox.addEventListener("click",(function({target:e}){if(!e.closest("button"))return;const t=e.closest("button");"favorites-data"===t.name&&(!function(e){const t=JSON.parse(e.dataset.info),n=JSON.parse(localStorage.getItem("favorites-data"));localStorage.setItem("favorites-data",JSON.stringify(n.filter((e=>e.id!==t.id)))),L()}(t),y(e)),"details"===t.name&&console.log("modal here")})),s.categoriesList.addEventListener("click",(function(e){if((0,f.showLoader)(),e.target.classList.contains("is-active"))return;let t,n=[];s.recipesListContainer.innerHTML="",e!==Number(e)&&"BUTTON"===e.target.nodeName&&(!function({target:e}){const t=document.querySelector(".is-active");t?t.classList.remove("is-active"):s.allButton.classList.add("is-active"),e.classList.add("is-active")}(e),v="main-cat-btn"===e.target.name?"":e.target.textContent);const i=localStorage.getItem("favorites-data");if(n=JSON.parse(i),!n||0===n.length)return void(s.categoriesContainer.style.display="none");if(!v)return void p();t=[...n.filter((e=>e.category===v))];let a=1;Number(e)===e&&(a=e);const o=c(),r=l(t,o),u=Object.keys(r).length;s.paginationElement.style.display=u>1?"block":"none",g(a,o,u,p);const m=r[a].reduce(((e,{title:t,description:n,preview:i,rating:a,id:o,category:s})=>e+(0,d.renderingFavRec)(t,n,i,a,o,s)),"");s.recipesListContainer.innerHTML=m,(0,f.hideLoader)()})),document.addEventListener("DOMContentLoaded",L),a("a1JXa");const b=document.querySelector(".scroll-to-top");b.addEventListener("click",(function(){window.scrollTo({top:0,behavior:"smooth"})})),window.addEventListener("scroll",(()=>{window.innerHeight+window.scrollY>=document.body.offsetHeight?setTimeout((()=>{b.style.display="block"}),500):b.style.display="none"})),a("cOsqO");
//# sourceMappingURL=favorites.d407cc59.js.map
