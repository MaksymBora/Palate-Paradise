!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},t.parcelRequired7c6=i),i("cs7FV");var o=i("d3Gjh"),a={recipesListContainer:document.querySelector(".fav-list"),categoriesContainer:document.querySelector(".fav-categories"),noFavoritesMessage:document.querySelector(".fav-empty"),paginationElement:document.getElementById("pagination"),allButton:document.querySelector(".common-btn"),categoriesList:document.querySelector(".fav-categories"),renderedRecipesBox:document.getElementById("fav-rendered-card"),heroImage:document.querySelector(".fav-hero")};function c(e){var t=localStorage.getItem(e);return JSON.parse(t)}var s=i("8nrFW");function l(){return window.innerWidth<768?9:12}function u(e,t){for(var n={},r=0;r<e.length;r+=t){n[Math.floor(r/t)+1]=e.slice(r,r+t)}return n}var d=i("2lkGM"),p=i("1VFfL");var v=function(t,n,r,i){var o={totalItems:n*r,itemsPerPage:n,visiblePages:window.innerWidth<768?2:3,page:t,centerAlign:!1,omitMiddlePages:!1,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",template:{page:'<a href="#" class="tui-page-btn pag-page">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}} move-button"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}} prev-button"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip more-button"><span class="tui-ico-ellip">...</span></a>'}};new(e(p))("pagination",o).on("afterMove",(function(e){var t=e.page;i(t)}))},f=(d=i("2lkGM"),i("kvC6y"));function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,f.showLoader)();var t=c("favoriteRecipes");if(a.allButton.style.display=t&&t.length?"block":"none",!t||0===t.length)return a.noFavoritesMessage.classList.remove("visually-hidden"),a.allButton.classList.add("visually-hidden"),void(window.innerWidth<768&&a.heroImage.classList.add("visually-hidden"));var n=l(),r=u(t,n),i=Object.keys(r).length;a.paginationElement.style.display=i>1?"block":"none",v(e,n,i,m);var o=r[e].map((function(e){var t=e.title,n=e.description,r=e.preview,i=e.rating,o=e.id,a=e.category;return(0,d.renderingFavRec)(t,n,r,i,o,a)})).join("");a.recipesListContainer.innerHTML=o,a.noFavoritesMessage.classList.add("visually-hidden"),(0,f.hideLoader)()}f=i("kvC6y");var g="";s=i("8nrFW"),f=i("kvC6y");function y(e){return'<button class="fav-button">'.concat(e,"</button>")}function h(t){(0,f.showLoader)();var n=t.closest("div.recipe-item").dataset.category,r=c("favoriteRecipes"),i=r.find((function(e){return e.category===n})),o=e(s)(refs.categoriesContainer.children).find((function(e){return e.textContent===n}));!i&&o?o.remove():i&&!o&&refs.categoriesContainer.insertAdjacentHTML("beforeend",y(n)),refs.allButton.style.display=r&&r.length?"block":"none",(0,f.hideLoader)()}f=i("kvC6y"),new(0,o.default);function L(){(0,f.showLoader)();var e=function(){var e=localStorage.getItem("favoriteRecipes"),t=JSON.parse(e);return t&&0!==t.length?t.flatMap((function(e){return e.category})).filter((function(e,t,n){return n.indexOf(e)===t})).reduce((function(e,t){return e+y(t)}),""):""}(),t=c("favoriteRecipes");a.recipesListContainer.innerHTML="",a.categoriesContainer.innerHTML=t&&t.length?"".concat('<button class="fav-button common-btn is-active" name="main-cat-btn">All categories</button>').concat(e):"",m(),(0,f.hideLoader)()}function b(e){var t=e.dataset.info,n=(JSON.parse(localStorage.getItem("favoriteRecipes"))||[]).filter((function(e){return e.id!==t}));localStorage.setItem("favoriteRecipes",JSON.stringify(n)),L()}window.addEventListener("load",(function(){var e=document.querySelectorAll(".menu-nav-links");e[0].classList.contains("header-accent")&&(e[0].classList.remove("header-accent"),e.length>1&&e[1].classList.add("header-accent"))})),document.addEventListener("click",(function(e){e.target.closest(".heart-btn")&&function(e){var t=e.target;b(t),t.classList.remove("active")}(e)})),a.renderedRecipesBox.addEventListener("click",(function(e){var t=e.target;if(t.closest("button")){var n=t.closest("button");"favoriteRecipes"===n.name&&(b(n),h(t))}})),a.categoriesList.addEventListener("click",(function(t){if((0,f.showLoader)(),!t.target.classList.contains("is-active")){var n,r,i,o=[];a.recipesListContainer.innerHTML="",t!==Number(t)&&"BUTTON"===t.target.nodeName&&(r=t.target,(i=document.querySelector(".is-active"))?i.classList.remove("is-active"):a.allButton.classList.add("is-active"),r.classList.add("is-active"),g="main-cat-btn"===t.target.name?"":t.target.textContent);var c=localStorage.getItem("favoriteRecipes");if((o=JSON.parse(c))&&0!==o.length)if(g){n=e(s)(o.filter((function(e){return e.category===g})));var p=1;Number(t)===t&&(p=t);var y=l(),h=u(n,y),L=Object.keys(h).length;a.paginationElement.style.display=L>1?"block":"none",v(p,y,L,m);var b=h[p].reduce((function(e,t){var n=t.title,r=t.description,i=t.preview,o=t.rating,a=t.id,c=t.category;return e+(0,d.renderingFavRec)(n,r,i,o,a,c)}),"");a.recipesListContainer.innerHTML=b,(0,f.hideLoader)()}else m();else a.categoriesContainer.style.display="none"}})),document.addEventListener("DOMContentLoaded",L),i("3rVfH");var w=document.querySelector(".scroll-to-top"),k=document.querySelector(".fav-list"),S=window.pageYOffset;w.addEventListener("click",(function(){window.scrollTo({top:0,behavior:"smooth"}),w.style.display="none"})),window.addEventListener("scroll",(function(){var e=window.innerHeight,t=k.offsetHeight,n=window.scrollY;w.style.display=n<=S||n+e>=t?"block":"none",(0===n||n>S)&&(w.style.display="none"),S=n}));var x,C=i("bpxeT"),E=i("2TvXO"),q=i("dIxxU"),M=document.querySelector(".backdrop-recipes"),R=document.querySelector(".modal-close-btn"),O=document.querySelector(".modal-recipes");function T(){O&&(O.classList.remove("is-hidden"),M.classList.remove("is-hidden"),document.addEventListener("keydown",N),O.addEventListener("click",(function(e){e.stopPropagation()})),M.removeEventListener("click",I),M.addEventListener("click",I),K(x))}function I(){O&&(document.querySelector(".recipes-iframe-video").src="",O.classList.add("is-hidden"),document.removeEventListener("keydown",N),M.removeEventListener("click",I),M.classList.add("is-hidden"))}function N(e){"Escape"===e.key&&I()}function B(e){return H.apply(this,arguments)}function H(){return(H=e(C)(e(E).mark((function t(n){var r,i,o;return e(E).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://tasty-treats-backend.p.goit.global/api/recipes/".concat(n),e.prev=1,e.next=4,q.default.get(r);case 4:return i=e.sent,F(o=i.data),_(o),A(o),j(o),J(o),P(o),W(o),D(o),e.abrupt("return",o);case 17:e.prev=17,e.t0=e.catch(1),console.log(e.t0);case 20:case"end":return e.stop()}}),t,null,[[1,17]])})))).apply(this,arguments)}function F(e){var t=document.querySelector(".recipes-iframe-video");t.src="";var n,r,i=e.youtube,o=(n=/(?:https?:\/\/(?:www\.)?youtube\.com\/watch\?v=|https?:\/\/youtu\.be\/)([\w-]+)/i,(r=i.match(n))&&r[1]?r[1]:"");t.src="https://www.youtube.com/embed/".concat(o)}function _(e){document.querySelector(".recipes-title").textContent=e.title}function A(e){document.querySelector(".recipes-description").textContent=e.instructions}function j(e){document.querySelector(".recipes-cooking-time").textContent=e.time}function J(e){document.querySelector(".ratinng-value").textContent=e.rating}function P(e){document.querySelector(".recipes-hashtags-list").innerHTML=e.tags.map((function(e){return'<li class="recipes-hashtags-item">#'.concat(e,"</li>")})).join("")}function W(e){document.querySelector(".recipes-components-list").innerHTML=e.ingredients.map((function(e){var t=e.measure,n=e.name;return'\n    <li class="recipes-components-item">\n      <p class="recipes-components-item_name">'.concat(n,'</p>\n      <p class="recipes-components-item_quantity">').concat(t,"</p>\n    </li>\n  ")})).join("")}function D(e){for(var t=parseFloat(e.rating),n=document.querySelectorAll(".modal-rating-star-icon"),r=0;r<n.length;r++)r<t?n[r].classList.add("active"):n[r].classList.remove("active")}function U(){return JSON.parse(localStorage.getItem("favoriteRecipes"))||[]}function G(e){localStorage.setItem("favoriteRecipes",JSON.stringify(e))}R.addEventListener("click",I),document.addEventListener("keydown",N),M.addEventListener("click",(function(e){e.target===O||O.contains(e.target)||I()})),M.addEventListener("click",(function(e){e.target===M&&I()})),document.addEventListener("DOMContentLoaded",(function(){var t,n=document.querySelector(".image-container"),r=document.querySelector(".popular-list");n.addEventListener("click",(t=e(C)(e(E).mark((function t(n){var r,i,o;return e(E).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.target.closest(".rec-btn-open")){e.next=3;break}return e.abrupt("return");case 3:return i=r.dataset.id,e.prev=4,e.next=7,B(i);case 7:(o=e.sent)&&(K(x=o),T()),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:case"end":return e.stop()}}),t,null,[[4,11]])}))),function(e){return t.apply(this,arguments)})),r&&r.addEventListener("click",function(){var t=e(C)(e(E).mark((function t(n){var r,i,o;return e(E).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.target.closest(".popular-list-item")){e.next=3;break}return e.abrupt("return");case 3:return i=r.dataset.id,e.prev=4,e.next=7,B(i);case 7:(o=e.sent)&&(K(x=o),T()),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:case"end":return e.stop()}}),t,null,[[4,11]])})));return function(e){return t.apply(this,arguments)}}())}));var V=document.querySelector(".btn-add-favorite");function Y(e){return U().some((function(t){return t.id===e._id}))}function K(e){var t=Y(e);V.textContent=t?"Remove from favorite":"Add to favorite"}V.addEventListener("click",(function(){var e,t,n,r,i,o,a,c,s,l;Y(x)?(l=x,G(U().filter((function(e){return e.id!==l._id}))),L(),V.textContent="Add to favorite"):(e=x,t=U(),n=e._id,r=e.title,i=e.category,o=e.rating,a=e.preview,c=e.description,s={id:n,title:r,category:i,rating:o,preview:a,description:c},Y(e)?(G(t.filter((function(e){return e.id!==n}))),V.textContent="Add to favorite"):(t.push(s),V.textContent="Remove from favorite"),G(t),V.textContent="Remove from favorite")})),i("fH4Kd")}();
//# sourceMappingURL=favorites.8805babc.js.map
