var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},o=e.parcelRequired7c6;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var i={id:e,exports:{}};return t[e]=i,o.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},e.parcelRequired7c6=o),o("lF9VE");var i=o("tgDFu");var r={recipesListContainer:document.querySelector(".fav-list"),categoriesContainer:document.querySelector(".fav-categories"),noFavoritesMessage:document.querySelector(".fav-empty"),paginationElement:document.getElementById("pagination"),allButton:document.querySelector(".common-btn"),categoriesList:document.querySelector(".fav-categories"),renderedRecipesBox:document.getElementById("fav-rendered-card"),heroImage:document.querySelector(".fav-hero")};function c(e){const t=localStorage.getItem(e);return JSON.parse(t)}function a(){return window.innerWidth<768?9:12}function s(e,t){const n={};for(let o=0;o<e.length;o+=t){n[Math.floor(o/t)+1]=e.slice(o,o+t)}return n}var d=o("fT9c6"),l=o("gW4Nf"),u=(l=o("gW4Nf"),d=o("fT9c6"),o("aVGVk"));function f(e=1){(0,u.showLoader)();const t=c("favoriteRecipes");if(r.allButton.style.display=t&&t.length?"block":"none",!t||0===t.length)return r.noFavoritesMessage.classList.remove("visually-hidden"),r.allButton.classList.add("visually-hidden"),void(window.innerWidth<768&&r.heroImage.classList.add("visually-hidden"));const n=a(),o=s(t,n),i=Object.keys(o).length;r.paginationElement.style.display=i>1?"block":"none",(0,l.default)(e,n,i,f);const m=o[e].map((({title:e,description:t,thumb:n,rating:o,id:i,category:r})=>(0,d.renderingFavRec)(e,t,n,o,i,r))).join("");r.recipesListContainer.innerHTML=m,r.noFavoritesMessage.classList.add("visually-hidden"),(0,u.hideLoader)()}u=o("aVGVk");let m="";u=o("aVGVk");function v(e){return`<button class="fav-button">${e}</button>`}function p(e){(0,u.showLoader)();const t=e.closest("div.recipe-item").dataset.category,n=c("favoriteRecipes"),o=n.find((e=>e.category===t)),i=[...refs.categoriesContainer.children].find((e=>e.textContent===t));!o&&i?i.remove():o&&!i&&refs.categoriesContainer.insertAdjacentHTML("beforeend",v(t)),refs.allButton.style.display=n&&n.length?"block":"none",(0,u.hideLoader)()}u=o("aVGVk");new(0,i.default);function g(){(0,u.showLoader)();const e=function(){const e=localStorage.getItem("favoriteRecipes"),t=JSON.parse(e);if(!t||0===t.length)return"";return t.flatMap((e=>e.category)).filter(((e,t,n)=>n.indexOf(e)===t)).reduce(((e,t)=>e+v(t)),"")}(),t=c("favoriteRecipes");r.recipesListContainer.innerHTML="",r.categoriesContainer.innerHTML=t&&t.length?`<button class="fav-button common-btn is-active" name="main-cat-btn">All categories</button>${e}`:"",f(),(0,u.hideLoader)()}function y(e){const t=e.dataset.info,n=(JSON.parse(localStorage.getItem("favoriteRecipes"))||[]).filter((e=>e.id!==t));localStorage.setItem("favoriteRecipes",JSON.stringify(n)),g()}window.addEventListener("load",(function(){const e=document.querySelectorAll(".menu-nav-links");e[0].classList.contains("header-accent")&&(e[0].classList.remove("header-accent"),e.length>1&&e[1].classList.add("header-accent"))})),document.addEventListener("click",(function(e){e.target.closest(".heart-btn")&&function(e){const t=e.target;y(t),t.classList.remove("active")}(e)})),r.renderedRecipesBox.addEventListener("click",(function({target:e}){if(!e.closest("button"))return;const t=e.closest("button");"favoriteRecipes"===t.name&&(y(t),p(e))})),r.categoriesList.addEventListener("click",(function(e){if((0,u.showLoader)(),e.target.classList.contains("is-active"))return;let t,n=[];r.recipesListContainer.innerHTML="",e!==Number(e)&&"BUTTON"===e.target.nodeName&&(!function({target:e}){const t=document.querySelector(".is-active");t?t.classList.remove("is-active"):r.allButton.classList.add("is-active"),e.classList.add("is-active")}(e),m="main-cat-btn"===e.target.name?"":e.target.textContent);const o=localStorage.getItem("favoriteRecipes");if(n=JSON.parse(o),!n||0===n.length)return void(r.categoriesContainer.style.display="none");if(!m)return void f();t=[...n.filter((e=>e.category===m))];let i=1;Number(e)===e&&(i=e);const c=a(),v=s(t,c),p=Object.keys(v).length;r.paginationElement.style.display=p>1?"block":"none",(0,l.default)(i,c,p,f);const g=v[i].reduce(((e,{title:t,description:n,preview:o,rating:i,id:r,category:c})=>e+(0,d.renderingFavRec)(t,n,o,i,r,c)),"");r.recipesListContainer.innerHTML=g,(0,u.hideLoader)()})),document.addEventListener("DOMContentLoaded",g),o("a1JXa");const L=document.querySelector(".scroll-to-top"),h=document.querySelector(".fav-list");let w=window.pageYOffset;L.addEventListener("click",(function(){window.scrollTo({top:0,behavior:"smooth"}),L.style.display="none"})),window.addEventListener("scroll",(function(){const e=window.innerHeight,t=h.offsetHeight,n=window.scrollY;L.style.display=n<=w||n+e>=t?"block":"none",(0===n||n>w)&&(L.style.display="none"),w=n}));var b=o("2shzp");let S;const k=document.querySelector(".backdrop-recipes"),E=document.querySelector(".modal-close-btn"),q=document.querySelector(".modal-recipes");function C(){q&&(q.classList.remove("is-hidden"),k.classList.remove("is-hidden"),document.addEventListener("keydown",x),q.addEventListener("click",(e=>{e.stopPropagation()})),k.removeEventListener("click",R),k.addEventListener("click",R),B(S))}function R(){if(q){document.querySelector(".recipes-iframe-video").src="",q.classList.add("is-hidden"),document.removeEventListener("keydown",x),k.removeEventListener("click",R),k.classList.add("is-hidden")}}function x(e){"Escape"===e.key&&R()}async function O(e){const t=`https://tasty-treats-backend.p.goit.global/api/recipes/${e}`;try{const e=(await b.default.get(t)).data;return function(e){const t=document.querySelector(".recipes-iframe-video");t.src="";const n=function(e){const t=/(?:https?:\/\/(?:www\.)?youtube\.com\/watch\?v=|https?:\/\/youtu\.be\/)([\w-]+)/i,n=e.match(t);return n&&n[1]?n[1]:""}(e.youtube);t.src=`https://www.youtube.com/embed/${n}`}(e),a=e,document.querySelector(".recipes-title").textContent=a.title,c=e,document.querySelector(".recipes-description").textContent=c.instructions,r=e,document.querySelector(".recipes-cooking-time").textContent=r.time,i=e,document.querySelector(".ratinng-value").textContent=i.rating,o=e,document.querySelector(".recipes-hashtags-list").innerHTML=o.tags.map((e=>`<li class="recipes-hashtags-item">#${e}</li>`)).join(""),n=e,document.querySelector(".recipes-components-list").innerHTML=n.ingredients.map((({measure:e,name:t})=>`\n    <li class="recipes-components-item">\n      <p class="recipes-components-item_name">${t}</p>\n      <p class="recipes-components-item_quantity">${e}</p>\n    </li>\n  `)).join(""),function(e){const t=parseFloat(e.rating),n=document.querySelectorAll(".modal-rating-star-icon");for(let e=0;e<n.length;e++)e<t?n[e].classList.add("active"):n[e].classList.remove("active")}(e),e}catch(e){console.log(e)}var n,o,i,r,c,a}function M(){return JSON.parse(localStorage.getItem("favoriteRecipes"))||[]}function T(e){localStorage.setItem("favoriteRecipes",JSON.stringify(e))}E.addEventListener("click",R),document.addEventListener("keydown",x),k.addEventListener("click",(e=>{e.target===q||q.contains(e.target)||R()})),k.addEventListener("click",(e=>{e.target===k&&R()})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".image-container"),t=document.querySelector(".popular-list");e.addEventListener("click",(async e=>{const t=e.target.closest(".rec-btn-open");if(!t)return;const n=t.dataset.id;try{const e=await O(n);e&&(S=e,B(S),C())}catch(e){console.log(e)}})),t&&t.addEventListener("click",(async e=>{const t=e.target.closest(".popular-list-item");if(!t)return;const n=t.dataset.id;try{const e=await O(n);e&&(S=e,B(S),C())}catch(e){console.log(e)}}))}));const N=document.querySelector(".btn-add-favorite");function I(e){return M().some((t=>t.id===e._id))}function B(e){const t=I(e);N.textContent=t?"Remove from favorite":"Add to favorite"}N.addEventListener("click",(()=>{var e;I(S)?(e=S,T(M().filter((t=>t.id!==e._id))),g(),N.textContent="Add to favorite"):(!function(e){const t=M(),{_id:n,title:o,category:i,rating:r,preview:c,description:a}=e,s={id:n,title:o,category:i,rating:r,preview:c,description:a};I(e)?(T(t.filter((e=>e.id!==n))),N.textContent="Add to favorite"):(t.push(s),N.textContent="Remove from favorite");T(t)}(S),N.textContent="Remove from favorite")})),o("eRvZ4"),o("ctm8S");
//# sourceMappingURL=favorites.78ec1668.js.map
